// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Vendedor {
  codigo        Int      @id @unique
  nome          String
  nomeGuerra    String
  email         String   @unique
  senha         String
  senhaRefresh  String?
  codGerente    Int?
  codSupervisor Int?
  eAtivo        Boolean  @default(true)
  eGerente      Boolean  @default(false)
  eSupervisor   Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  marcas        Marca[]

  @@map("vendedores")
}

model Linha {
  codigo    Int      @id @unique
  descricao String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  produtos Produto[]

  @@map("linhas")
}

model Colecao {
  codigo    Int      @id @unique
  descricao String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  produtos Produto[]

  @@map("colecoes")
}

model Grupo {
  codigo    Int      @id @unique
  descricao String
  eAtivo    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  subGrupos SubGrupo[]
  produtos  Produto[]

  @@map("grupos")
}

model SubGrupo {
  codigo    Int      @id @unique
  descricao String
  eAtivo    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  grupo       Grupo     @relation(fields: [codigoGrupo], references: [codigo])
  codigoGrupo Int
  produtos    Produto[]

  @@map("subgrupos")
}

model Marca {
  codigo    Int      @id @unique
  descricao String
  eAtivo    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  produtos   Produto[]
  vendedores Vendedor[]

  @@map("marcas")
}

model Cor {
  codigo    Int      @id @unique
  descricao String
  hex       String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  produtos      Produto[]
  RelCorProduto RelCorProduto[]

  @@map("cores")
}

model RelCorProduto {
  id String @id() @default(uuid())

  cor       Cor @relation(fields: [corCodigo], references: [codigo])
  corCodigo Int

  produto       Produto? @relation(fields: [codigoProduto], references: [codigo])
  codigoProduto Int?     @unique

  @@map("relCorProdutos")
}

model Produto {
  codigo                Int      @id @unique
  codigoAlternativo     Int
  referencia            String
  descricao             String
  descricaoComplementar String
  precoVenda            Float
  unidade               String
  eAtivo                Boolean  @default(true)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  corPrimaria       Cor?           @relation(fields: [corPrimariaCodigo], references: [codigo])
  corPrimariaCodigo Int?
  corSecundaria     RelCorProduto?
  marca             Marca          @relation(fields: [codigoMarca], references: [codigo])
  codigoMarca       Int
  colecao           Colecao?       @relation(fields: [codigoColecao], references: [codigo])
  codigoColecao     Int?
  linha             Linha?         @relation(fields: [codigoLinha], references: [codigo])
  codigoLinha       Int?
  grupo             Grupo?         @relation(fields: [codigoGrupo], references: [codigo])
  codigoGrupo       Int?
  subGrupo          SubGrupo?      @relation(fields: [codigoSubGrupo], references: [codigo])
  codigoSubGrupo    Int?

  @@map("produtos")
}
